{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-list-help.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// import icon from '../images/amazon.png';\n// import icon_2 from '../images/book.png';\nimport sprite1 from '../images/myPhotos/book.png';\nimport sprite2 from '../images/myPhotos/amazon.png';\n\nlet arrayBooksShop = getMapFromLocalStorage();\nupdateLocalStorage();\nconst mainContentUl = document.querySelector('.list-books-shopping');\nconst loadingIndicator = document.querySelector('.container-loader');\nconst ulPagination = document.querySelector('.ul-pagination');\n// new code //\nwindow.addEventListener('load', async e => {\n  e.preventDefault();\n  if (arrayBooksShop.size === 0) {\n    document.querySelector('.empty-shop-list').style.display = 'flex';\n    ulPagination.style.display = 'none';\n  } else {\n    await createSubArray(0, 3);\n    showPagination();\n    scrollUp();\n  }\n  addColorLastWord('Shopping List');\n  loadingIndicator.style.display = 'none';\n});\nasync function showPagination() {\n  const sizeMap = arrayBooksShop.size;\n  const page = sizeMap / 3;\n  let booksCard = `\n      <div class=\"svg-li-pagination-container\">\n          <li class=\"svg-li-pagination-l\" data-id=\"start\"><<</li>\n          <li class=\"svg-li-pagination-l\" data-id=\"prev\"><</li>\n      </div>\n      <div class=\"li-pagination-container\">\n          <li class=\"page-li-pagination-hidden-el-l\"></li>`;\n  if (sizeMap > 3) {\n    booksCard += `<li id=\"1\" class=\"page-li-pagination page-one\" data-id=\"1\">1</li>`;\n    if (sizeMap % 3 === 0) {\n      for (let i = 2; i <= page; i++) {\n        booksCard += `<li id=\"${i}\" class=\"page-li-pagination\" data-id=\"${i}\">${i}</li>`;\n      }\n    } else {\n      for (let i = 2; i <= page + 1; i++) {\n        booksCard += `<li id=\"${i}\" class=\"page-li-pagination\" data-id=\"${i}\">${i}</li>`;\n      }\n    }\n  } else {\n    booksCard += `<li id=\"1\" class=\"page-li-pagination page-one\" data-id=\"1\">1</li>`;\n  }\n  booksCard += `\n          <li class=\"page-li-pagination-hidden-el-r\"></li>\n      </div>\n      <div class=\"svg-li-pagination-container\">\n          <li class=\"svg-li-pagination-r\" data-id=\"next\">></li>\n          <li class=\"svg-li-pagination-r\" data-id=\"last\">>></li>\n      </div>`;\n  ulPagination.innerHTML = booksCard;\n  hiddenLiPagination(0);\n  ulPagination.style.display = 'flex';\n}\n\nasync function showBooksInShoppingList(data) {\n  try {\n    let booksCard = `\n          <li class=\"list-all-books-in-shoplist\">\n              <div style=\"min-width: 116px;\">\n                  <img class=\"image-example-shop-list\" src=\"${data.book_image}\" alt=\"${data.title}\">\n              </div>\n              <div class=\"content-shop-list\">\n                  <div class=\"main-content-shop-list\">\n                      <div class=\"top-content-shop-list\">\n                          <div class=\"card-book-container data-shop-list\">\n                              <p class=\"p-title\">${data.title}</p>\n                              <p class=\"p-category\">${data.category}</p>\n                          </div>\n                          <div data-title=\"${data.title}\" class=\"svg-delete-shop-list svg-delete\">\n                              <svg data-title=\"${data.title}\" class=\"svg-delete\" width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                  <path data-title=\"${data.title}\"class=\"svg-delete\" d=\"M8.25 2.75H13.75M2.75 5.5H19.25M17.4167 5.5L16.7738 15.1427C16.6774 16.5894 16.6291 17.3128 16.3167 17.8613C16.0416 18.3441 15.6266 18.7323 15.1265 18.9747C14.5585 19.25 13.8335 19.25 12.3836 19.25H9.61643C8.1665 19.25 7.44153 19.25 6.87348 18.9747C6.37336 18.7323 5.95841 18.3441 5.68332 17.8613C5.37085 17.3128 5.32263 16.5894 5.22618 15.1427L4.58333 5.5M9.16667 9.625V14.2083M12.8333 9.625V14.2083\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n                              </svg>\n                          </div>\n                      </div>\n                      <p class=\"description-shop-list\">${data.description}</p>\n                  </div>\n                  <div class=\"bottom-content-shop-list\">\n                      <p>${data.author}</p>\n                      <div class=\"links-books\">                    \n                        <a href=\"${data.link_amazon}\" rel=\"amazon ${data.title}\" target=\"_blank\"\"><img src=\"${sprite2}\" alt=\"amazon\" class=\"filter-img\"></a>\n                        <a href=\"${data.link_goto}\" rel=\"apple-book\" target=\"_blank\"\"><img src=\"${sprite1}\" alt=\"amazon\" class=\"filter-img\"></a>\n\n                      </div>\n                  </div>\n              </div>\n          </li>`;\n    return booksCard;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n  }\n}\n\nasync function createSubArray(startIndex, endIndex) {\n  const arraySubset = Array.from(arrayBooksShop.values()).slice(\n    startIndex,\n    endIndex\n  );\n  // console.log(Object.values(arraySubset));\n  let booksCard = ``;\n  for (let object_book of arraySubset) {\n    booksCard += await showBooksInShoppingList(object_book);\n  }\n  mainContentUl.innerHTML = booksCard;\n}\nmainContentUl.addEventListener('click', async e => {\n  if (e.target.classList.contains('svg-delete')) {\n    loadingIndicator.style.display = 'block';\n    arrayBooksShop.delete(e.target.dataset.title);\n    await createSubArray(0, 3);\n    if (arrayBooksShop.size !== 0) {\n      await showPagination();\n    } else {\n      ulPagination.style.display = 'none';\n      document.querySelector('.empty-shop-list').style.display = 'flex';\n    }\n    loadingIndicator.style.display = 'none';\n    updateLocalStorage();\n  }\n});\n\nasync function hiddenLiPagination(startElement) {\n  const distance = isWidthDevice();\n  document.querySelectorAll('.page-li-pagination').forEach((element, index) => {\n    if (index < startElement - distance || index > startElement + distance) {\n      element.style.display = 'none';\n    } else {\n      element.style.display = 'flex';\n    }\n  });\n  const totalElements =\n    document.querySelectorAll('.page-li-pagination').length - 1;\n  if (startElement > distance) {\n    document.querySelector('.page-li-pagination-hidden-el-l').style.display =\n      'flex';\n    document.querySelector('.page-li-pagination-hidden-el-l').innerHTML = '...';\n  } else {\n    document.querySelector('.page-li-pagination-hidden-el-l').style.display =\n      'none';\n  }\n  if (startElement < totalElements - distance) {\n    document.querySelector('.page-li-pagination-hidden-el-r').style.display =\n      'flex';\n    document.querySelector('.page-li-pagination-hidden-el-r').innerHTML = '...';\n  } else {\n    document.querySelector('.page-li-pagination-hidden-el-r').style.display =\n      'none';\n  }\n}\nulPagination.addEventListener('click', async e => {\n  e.preventDefault();\n  if (\n    e.target.classList.contains('svg-li-pagination-l') ||\n    e.target.classList.contains('svg-li-pagination-r') ||\n    e.target.classList.contains('page-li-pagination')\n  ) {\n    const perPage = 3;\n    let startIndex;\n    let pageActive;\n    try {\n      switch (e.target.getAttribute('data-id')) {\n        case 'start':\n          startIndex = 0;\n          pageActive = 1;\n          if (document.querySelector('.page-one').id === '1')\n            throw new Error('First page');\n          document.querySelector('.page-one').classList.remove('page-one');\n          document.getElementById('1').classList.add('page-one');\n          break;\n        case 'next':\n          startIndex =\n            parseInt(document.querySelector('.page-one').textContent) * perPage;\n          if (startIndex >= arrayBooksShop.size) throw new Error('Last page');\n          let id = document.querySelector('.page-one').textContent;\n          document.getElementById(id).classList.remove('page-one');\n          id = (parseInt(id) + 1).toString();\n          document.getElementById(id).classList.add('page-one');\n          pageActive = parseInt(document.getElementById(id).id);\n          break;\n        case 'last':\n          const sizeMap = arrayBooksShop.size;\n          const page = Math.floor(sizeMap / perPage);\n          if (sizeMap % perPage === 0) {\n            startIndex = (page - 1) * perPage;\n            pageActive = page;\n          } else {\n            startIndex = sizeMap - (sizeMap - page * perPage);\n            pageActive = page + 1;\n          }\n          if (startIndex >= sizeMap) throw new Error('Last page');\n          else if (\n            document.querySelector('.page-one').id ===\n            Math.ceil(sizeMap / perPage).toString()\n          ) {\n            throw new Error('Last page');\n          }\n          document.querySelector('.page-one').classList.remove('page-one');\n          let countLi = document\n            .querySelectorAll('.page-li-pagination')\n            .length.toString();\n          document.getElementById(countLi).classList.add('page-one');\n          break;\n        case 'prev':\n          startIndex =\n            (parseInt(document.querySelector('.page-one').textContent) - 1) *\n              perPage -\n            3;\n          if (startIndex < 0) throw new Error('First page');\n          let idPrev = document.querySelector('.page-one').textContent;\n          document.getElementById(idPrev).classList.remove('page-one');\n          idPrev = (parseInt(idPrev) - 1).toString();\n          document.getElementById(idPrev).classList.add('page-one');\n          pageActive = parseInt(document.getElementById(idPrev).id);\n          break;\n        default:\n          startIndex =\n            (parseInt(e.target.getAttribute('data-id')) - 1) * perPage;\n          document.querySelector('.page-one').classList.remove('page-one');\n          e.target.classList.add('page-one');\n          pageActive = parseInt(e.target.getAttribute('data-id'));\n      }\n      let endIndex = startIndex + 3;\n      createSubArray(startIndex, endIndex);\n      hiddenLiPagination(pageActive - 1);\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: error.message,\n      });\n    } finally {\n      scrollUp();\n    }\n  }\n});\nasync function scrollUp() {\n  window.scroll(0, 0);\n}\nasync function addColorLastWord(word) {\n  const lastSpaceIndex = word.lastIndexOf(' ');\n  const nameCategory = document.querySelector('.name-category');\n  nameCategory.innerHTML = `${word.substring(\n    0,\n    lastSpaceIndex\n  )} <span style=\"color: #4F2EE8;\">${word.substring(\n    lastSpaceIndex + 1\n  )}</span>`;\n}\n\nfunction isWidthDevice() {\n  let widthWindow = window.innerWidth;\n\n  if (widthWindow <= 767) return 1;\n  else return 2;\n}\n\n// local storeg //\nfunction getMapFromLocalStorage() {\n  const serializedData = localStorage.getItem('arrayBooksShop');\n  if (serializedData) {\n    const dataArray = JSON.parse(serializedData);\n    return new Map(dataArray);\n  }\n  return new Map();\n}\nfunction updateLocalStorage() {\n  const serializedData = JSON.stringify([...arrayBooksShop]);\n  localStorage.setItem('arrayBooksShop', serializedData);\n}\n"],"names":["arrayBooksShop","getMapFromLocalStorage","updateLocalStorage","mainContentUl","loadingIndicator","ulPagination","createSubArray","showPagination","scrollUp","addColorLastWord","sizeMap","page","booksCard","i","hiddenLiPagination","showBooksInShoppingList","data","sprite2","sprite1","error","iziToast","startIndex","endIndex","arraySubset","object_book","startElement","distance","isWidthDevice","element","index","totalElements","pageActive","id","countLi","idPrev","word","lastSpaceIndex","nameCategory","serializedData","dataArray"],"mappings":"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"}